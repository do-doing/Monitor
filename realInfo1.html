<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>机场综合监控</title>
  <link rel="stylesheet" type="text/css" href="css/iconfont.css">
  <link rel="stylesheet" href="css/jquery.dataTables.min.css" />
  <link rel="stylesheet" href="css/style.css">

  <style>

  </style>
</head>

<body>
  <div class="container realInf">
    <div class="top">
      <div class="right">
        <section class="section">
          <div class="rigth-top">
            <div class="section-title text-c">
              <h3>不正常航班信息</h3>
            </div>
            <div class="table-box table-sm scroll-table">
              <table id="scrollTable" class="display" cellspacing="0" border="0" width="100%">
                <thead>
                  <tr>
                    <th>航班号</th>
                    <th>机型</th>
                    <th>机号</th>
                    <th>不正常原因</th>
                  </tr>
                </thead>
              </table>
            </div>
          </div>
        </section>
      </div>
      <div class="left" style="flex:1;margin-left:15px">
        <section class="section left-top">
          <div class="wrapper">
            <div class="items">
              <i class="iconfont icon-shijian"></i>
              <div>
                <h4 id="realDate">2018-06-08</h4>
                <p id="realTime">AM 10:26</p>
              </div>
            </div>
            <div class="items">
              <i class="iconfont icon-tianqi-fengxiang"></i>
              <div>
                <h4>风向/风速</h4>
                <p id="windRealInfo">-</p>
              </div>
            </div>
            <div class="items">
              <i class="iconfont icon-duowu-baitian"></i>
              <div>
                <h4>能见度</h4>
                <p id="visibilityRealInfo">9999m/s</p>
              </div>
            </div>
            <div class="items">
              <i class="iconfont icon-baitian-duoyun"></i>
              <div>
                <h4>云量/云底高</h4>
                <p id="cloudRealInfo">少云/1600m/s</p>
              </div>
            </div>
            <div class="items">
              <i class="iconfont icon-wendu"></i>
              <div>
                <h4>温度/露点</h4>
                <p id="temRealInfo">30℃/27℃</p>
              </div>
            </div>
            <div class="items s-item">

              <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-taifeng-huang"></use>
              </svg>
              <div class="taifeng">
                <h4 class="blink">黄色台风预警</h4>
                <div><span>气压:1001</span><span>风力:7</span><span>移速:20</span></div>
              </div>
            </div>
          </div>

          <!-- <div class="right-t">
            <div id="ring-discharged-daily" style="height: 34vh;"></div>
          </div>
          <div class="content-item abs" style="display:block;">
            <div class="list1" style="display:block;">
              <span>当月放行正常率</span>
              <div class="main">
                <div id="">
                  <b>80%</b>
                </div>
              </div>
            </div>
          </div> -->
          <div style="display:flex">
            <div style="width:50%; position: relative;">
              <div class="right-t">
                <div>
                  <div id="ring-discharged-daily" style="width:28vw;"></div>
                  <p class="title">当日放行正常率</p>
                </div>
                <!-- <div id="kaoqiaolv" style="width: 20vw;"></div> -->
              </div>
              <div class="content-item abs" style="display:block; left: 10px">
                <div class="list1 text-c" style="display:block;">
                  <span>当月放行正常率</span>
                  <div class="main">
                    <div id="">
                      <b>80%</b>
                    </div>
                  </div>
                </div>
              </div>
              <div class="content-item abs" style="display:block; right: 10px">
                <div class="list1 text-c" style="display:block;">
                  <span>靠桥率</span>
                  <div class="main">
                    <div id="">
                      <b>80%</b>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div style="width:50%;">
              <div class="right-content">
                <p class="content-title">执行情况</p>
                <div class="content-item" style="display:block;">
                  <div class="list1">
                    <span>进港</span>
                    <div class="main">
                      <div id="arriveRealInfo">
                        <span>实际</span><b>25</b><i class="diag"></i>
                        <span>计划</span><b>25</b>
                      </div>
                    </div>
                    <span id="arriveRealInfoPercent">22.12%</span>
                  </div>
                  <div class="list1">
                    <span>出港</span>
                    <div class="main">
                      <div id="departRealInfo">
                        <span>实际</span><b>25</b><i class="diag"></i>
                        <span>计划</span><b>25</b>
                        </span>
                      </div>
                    </div>
                    <span id="departRealInfoPercent">28.12%</span>
                  </div>
                </div>
              </div>
              <div class="right-content flex">
                <div class="half">
                  <p class="content-title">延误航班</p>
                  <div class="content-item" style="display:block;">
                    <div class="list1">
                      <span>进港</span>
                      <div class="main">
                        <div id="delayArriveCount">
                          <span></span><b>0</b><i class="diag"></i>
                          <span></span><b>0</b>
                        </div>
                      </div>
                    </div>
                    <div class="list1">
                      <span>出港</span>
                      <div class="main">
                        <div id="delayDepartCount">
                          <span></span><b>0</b><i class="diag"></i>
                          <span></span><b>0</b>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="half">
                  <p class="content-title">取消航班</p>
                  <div class="content-item" style="display:block;">
                    <div class="list1">
                      <span>进港</span>
                      <div class="main">
                        <div id="cancelArriveCount">
                          <span></span><b>0</b><i class="diag"></i>
                          <span></span><b>58</b>
                        </div>
                      </div>
                    </div>
                    <div class="list1">
                      <span>出港</span>
                      <div class="main">
                        <div id="cancelDepartCount">
                          <span></span><b>0</b><i class="diag"></i>
                          <span></span><b>58</b>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


              <div class="right-content flex">
                <div class="half">
                  <p class="content-title">备降航班</p>
                  <div class="content-item" style="display:block;">
                    <div class="list1">
                      <span>进港</span>
                      <div class="main">
                        <div id="alternateArriveCount">
                          <span></span><b>0</b><i class="diag"></i>
                          <span></span><b>58</b>
                        </div>
                      </div>
                    </div>
                    <div class="list1">
                      <span>出港</span>
                      <div class="main">
                        <div id="alternateDeaprtCount">
                          <span></span><b>0</b><i class="diag"></i>
                          <span></span><b>58</b>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="half">
                  <p class="content-title">地面滑行平均效率</p>
                  <div class="content-item" style="display:block">
                    <div class="list1">
                      <span>进港速度</span>
                      <div class="main">
                        <div id="delayArriveCount">
                          <b>7min</b><i class="diag"></i>
                          <span>架</span>
                        </div>
                      </div>
                    </div>
                    <div class="list1">
                      <span>出港速度</span>
                      <div class="main">
                        <div id="delayArriveCount">
                          <b>8min</b><i class="diag"></i>
                          <span>架</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="b-line"></div>

              <div class="right-content flex">
                <div class="half">
                  <div class="content-item">
                    <div class="item-l">
                      <h4>累计保障航班</h4>
                      <strong>28953</strong>
                    </div>
                    <div class="item-r">
                      <p>进港<b>16037</b></p>
                      <p>出港<b>16037</b></p>
                    </div>
                  </div>
                </div>
                <div class="half">
                  <div class="content-item">
                    <div class="item-l">
                      <h4>累计保障旅客</h4>
                      <strong>3249214</strong>
                    </div>
                    <div class="item-r">
                      <p>进港<b>16037</b></p>
                      <p>出港<b>16037</b></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
          </div>
        </section>


      </div>
    </div>
    <div class="bottom">
      <section class="section left-bottom">
        <div id="airplan-chart" style="width: 100%; height:40vmin"></div>
      </section>
    </div>

    <!-- <div class="left">
      
      <section class="section left-main">
        <div class="right-t">
          <div id="ring-discharged-daily" style="height: 34vh;"></div>
        </div>
        <div class="content-item abs" style="display:block;">
          <div class="list1" style="display:block;">
            <span>当月放行正常率</span>
            <div class="main">
              <div id="">
                <b>80%</b>
              </div>
            </div>
          </div>
        </div>
      
      </section>
     
    </div> -->
  </div>


  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
  <script src="js/highcharts.js"></script>
  <script type="text/javascript" src="js/highcharts-axis-arrow.js"></script>
  <script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
  <script src="css/iconfont.js"></script>
  <script type="text/javascript">

    $(function () {
      var data1, data2,data3;
      drawChartForFlight(data1);
      drawChartForDischargedDaily(data2);
      drawChartForKaoQiaoLv(data3);
    });

    function drawChartForFlight(data) {

      var arriveFlightCount = [3, 8, 3, 3, 4, 8, 8, 8, 9, 4, 5, 7, 7, 6, 1, 5, 6, 2, 9, 2, 3, 8, 8, 4];
      var arrivePlantCount = [8, 14, 14, 6, 9, 14, 11, 10, 14, 9, 10, 14, 8, 14, 14, 6, 9, 14, 11, 10, 14, 9, 10, 14];
      var departFlightCount = [-2, -7, -16, -10, -16, -7, -7, -14, -10, -10, -16, -14, -2, -7, -16, -10, -16, -7, -7, -14, -10, -10, -16, -14];
      var departPlanCount = [-4, -9, -19, -12, -18, -9, -10, -18, -12, -16, -13, -19, -12, -7, -16, -10, -16, -7, -7, -14, -10, -10, -16, -14];
      //获取
      var nowDate = new Date();
      // var startDate = new Date(nowDate.getTime() - 17 * 60 * 60 * 1000);
      var startDate = new Date(nowDate.getTime());
      var fullYear = startDate.getFullYear();
      var month = startDate.getMonth();
      var day = startDate.getDate();
      var hours = startDate.getHours();
      console.log(hours);
      var options = {
        chart: {
          type: 'column',
          align: 'center',
          backgroundColor: 'transparent'
        },
        legend: {
          enabled: true,
          itemStyle: { cursor: 'pointer', color: '#fff' }
        },
        tooltip: {

        },
        credits: {
          enabled: false
        },
        title: {
          text: '航班时段统计',
          style: {
            fontSize: 16,
            color: '#fff',
            fontWeight: 'bold'
          },
        },
        xAxis: {
          offset: 0,
          lineWidth: 1,
          tickWidth: 0,
          tickLength: 10,
          categories: ['04:00', '05:00', '06:00', '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00', '00:00', '01:00', '02:00', '03:00'],
          plotBands: [{ // 标记已过时间
            from: -.5,
            to: 8.5,
            color: 'rgba(68, 170, 213, .2)'
          }],
          labels: {
            style: {
              color: '#fff',
              fontSize: 12,
            }
          },
          type: 'datetime',
          dateTimeLabelFormats: {
            hour: '%H'
          },
        },
        yAxis: {
          title: {
            text: '班次',
            style: {
              color: '#fff'
            }
          },
          gridLineDashStyle: 'LongDash',
          gridLineWidth: 0.25,
          tickInterval: 5,
          labels: {
            formatter: function () {
              return Math.abs(this.value);
            },
            style: {
              color: '#F4F4F5',
              fontSize: 14,
              fontWeight: 'normal'
            }
          }
        },
        plotOptions: {
          column: {
            dataLabels: {
              enabled: true,
              align: 'center',
              inside: false,
              borderWidth: 1,
              padding: 0,
              style: {
                fontWeight: 'normal',
                fontSize: 13,
                color:'#fff',
                textOutline: 'none'
              },
              formatter: function () {
                return Math.abs(this.y);
              }
            },
            pointPadding: 0,
            borderWidth: 0,
          },
          series: {
            // stacking: 'normal'
          }
        },
        series: [
          // {
          //   color: {
          //     linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
          //     stops: [
          //       [0, '#90caf9'],
          //       [1, '#047edf']
          //     ]
          //   },
          //   name: '实际进港航班',
          //   //data: [8, 14, 14, 6, 9, 14, 11, 10, 14, 9, 10, 14, 17, 11, 15, 6, 10, 6],
          //   data: arriveFlightCount,
          //   // pointStart: Date.UTC(fullYear, month, day, hours),
          //   // pointInterval: 60 * 60 * 1000 // one hour

          // },
          // {
          //   color: {
          //     linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
          //     stops: [
          //       [0, '#07cdae'],
          //       [1, '#84d9d2']
          //     ]
          //   },
          //   name: '实际出港航班',
          //   //data: [-0, -7, -16, -10, -16, -7, -7, -14, -10, -10, -16, -14, -16, -16, -13, -15, -10, -6],
          //   data: departFlightCount,
          //   // pointStart: Date.UTC(fullYear, month, day, hours),
          //   // pointInterval: 60 * 60 * 1000 // one hour
          //   pointPlacement: -0.15
          // },
          // {
          //   color: {
          //     linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
          //     stops: [
          //       [0, 'rgba(144, 202, 249, 0.5)'],
          //       [1, 'rgba(4, 126, 223, .5)']
          //     ]
          //   },
          //   name: '计划进港航班',
          //   //data: [8, 14, 14, 6, 9, 14, 11, 10, 14, 9, 10, 14, 17, 11, 15, 6, 10, 6],
          //   data: arrivePlantCount,
          //   // pointStart: Date.UTC(fullYear, month, day, hours),
          //   // pointInterval: 60 * 60 * 1000 // one hour
          //   pointPlacement: -0.15
          // },
          // {
          //   color: {
          //     linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
          //     stops: [
          //       [0, 'rgba(7, 205, 174, .5)'],
          //       [1, 'rgba(132, 217, 210, .5)']
          //     ]
          //   },
          //   name: '计划进港航班',
          //   //data: [8, 14, 14, 6, 9, 14, 11, 10, 14, 9, 10, 14, 17, 11, 15, 6, 10, 6],
          //   data: departPlanCount,
          //   // pointStart: Date.UTC(fullYear, month, day, hours),
          //   // pointInterval: 60 * 60 * 1000 // one hour
          //   pointPlacement: -0.3
          // },
          {
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                [0, '#90caf9'],
                [1, '#047edf']
              ]
            },
            name: '实际进港航班',
            data: arriveFlightCount,

          },
          {
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                [0, '#07cdae'],
                [1, '#84d9d2']
              ]
            },
            name: '实际出港航班',
            data: departFlightCount,
            pointPlacement: -0.15
          },
          {
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                [0, 'rgba(144, 202, 249, 0.3)'],
                [1, 'rgba(4, 126, 223, .3)']
              ]
            },
            name: '计划进港航班',
            data: arrivePlantCount,
            pointPlacement: -0.15
          },
          {
            color: {
              linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
              stops: [
                [0, 'rgba(7, 205, 174, .3)'],
                [1, 'rgba(132, 217, 210, .3)']
              ]
            },
            name: '计划进港航班',
            data: departPlanCount,
            pointPlacement: -0.3
          },
        ]
      };

      var chart = Highcharts.chart("airplan-chart", options);
    }
    function drawChartForDischargedDaily(data) {
      var chart = Highcharts.chart('ring-discharged-daily', {
        chart: {
          type: 'pie',
          animation: true,
          spacing: [10, 40, 10, 40],
          backgroundColor: {
            // linearGradient: [0, 0, 0, 1],
            stops: [
              [0, '#370964'],
              [1, '#2B1687']
            ]
          },
          borderRadius: 100
        },
        tooltip: {
          enabled: false
        },
        credits: {
          enabled: false
        },
        //标题
        title: {
          floating: true,
          text: '90 %',
          style: {
            lineHeight: 24,
            fontSize: 45,
            color: '#fff',
            fontWeight: 'bold'
          }
        },
        plotOptions: {
          pie: {
            cursor: 'pointer',
            dataLabels: {
              enabled: false,
              format: '<b>{point.name}</b>: {point.percentage:.1f} %',
              style: {
                fontSize: 16,
                color: '#fff',
              }
            }
          }
        },
        series: [{
          type: 'pie',
          innerSize: '80%',
          name: '放行率',
          borderWidth: 0,
          data: [
            {
              name: '当日放行正常率',
              y: 90.0,
              color: {
                linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
                stops: [
                  [0, '#796FBE'],
                  [1, '#20ABF6']
                ]
              }
            },
            {
              name: '不正常率',
              y: 10.0,
              color: '#D2D2D2'
            }
          ]
        }]
      }, function (c) { // 图表初始化完毕后的会掉函数
        // 环形图圆心
        var centerY = c.series[0].center[1],
          titleHeight = parseInt(c.title.styles.fontSize);
        // 动态设置标题位置
        c.setTitle({
          y: centerY + titleHeight / 2
        });
      });
    }

    // function drawChartForKaoQiaoLv(data) {
    //     var chart = Highcharts.chart('kaoqiaolv', {
    //       chart: {
    //         type: 'pie',
    //         animation: true,
    //         spacing: [40, 40, 40, 40],
    //         backgroundColor: {
    //           // linearGradient: [0, 0, 0, 1],
    //           stops: [
    //             [0, '#370964'],
    //             [1, '#2B1687']
    //           ]
    //         },
    //         borderRadius: 100
    //       },
    //       tooltip: {
    //         enabled: false
    //       },
    //       credits: {
    //         enabled: false
    //       },
    //       //标题
    //       title: {
    //         floating: true,
    //         text: '靠桥率 90 %',
    //         style: {
    //           lineHeight: 24,
    //           fontSize: 17,
    //           color: '#fff',
    //           fontWeight: 'bold'
    //         }
    //       },
    //       plotOptions: {
    //         pie: {
    //           cursor: 'pointer',
    //           dataLabels: {
    //             enabled: false,
    //             format: '<b>{point.name}</b>: {point.percentage:.1f} %',
    //             style: {
    //               fontSize: 16,
    //               color: '#fff',
    //             }
    //           }
    //         }
    //       },
    //       series: [{
    //         type: 'pie',
    //         innerSize: '80%',
    //         name: '靠桥率',
    //         borderWidth: 0,
    //         data: [
    //           {
    //             name: '当日放行正常率',
    //             y: 90.0,
    //             color: {
    //               linearGradient: { x1: 0, x2: 0, y1: 0, y2: 1 },
    //               stops: [
    //                 [0, '#796FBE'],
    //                 [1, '#20ABF6']
    //               ]
    //             }
    //           },
    //           {
    //             name: '不正常率',
    //             y: 10.0,
    //             color: '#D2D2D2'
    //           }
    //         ]
    //       }]
    //     }, function (c) { // 图表初始化完毕后的会掉函数
    //       // 环形图圆心
    //       var centerY = c.series[0].center[1],
    //         titleHeight = parseInt(c.title.styles.fontSize);
    //       // 动态设置标题位置
    //       c.setTitle({
    //         y: centerY + titleHeight / 2
    //       });
    //     });
    //   }




  </script>

  <script src="js/jquery.js"></script>
  <script src="js/jquery.dataTables.min.js"></script>
  <script>
    var scrollTable, rightTable;
    var check_in
    $(document).ready(function () {
      scrollTable = $('#scrollTable').dataTable({
        "bFilter": false,
        "bServerSide": false,//开启服务端模式（开启后会给服务端发送分页相关信息）
        "bSort": false, //排序功能
        "info": false,//是否显示底部文字
        "paging": false,//是否开启分页
        "scrollY": 445,
        "ajax": "arrays2018-11-07.txt"
      });
      window.setInterval("autoScrollTop()", 100)
    });

    var scrollTop = 0;
    function autoScrollTop() {
      var bTable = $('.scroll-table .dataTables_scrollBody');
      bTable.css("overflow-y", "hidden");
      var sh = bTable[0].scrollHeight;
      var st = bTable[0].scrollTop;
      var h = bTable.height();
      scrollTop += 1;
      if (st + h >= sh) {
        scrollTop = 0;
      }
      bTable.scrollTop(scrollTop);
    }
  </script>
</body>

</html>